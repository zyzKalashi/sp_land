<!doctype html>
<html xmlns:th="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="utf-8">
    <title>铁西区农村经济总站土地流转交易监管平台</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <link rel="stylesheet" type="text/css" th:href="@{/static/css/bootstrap/bootstrap.css}">
    <link rel="stylesheet" type="text/css" th:href="@{/static/css/admin-html.css}">
    <link rel="stylesheet" type="text/css" th:href="@{/static/plugin/jeDate/jeDate.css}">
    <script th:src="@{/static/js/jquery.min.js}"></script>
    <script th:src="@{/static/js/bootstrap/bootstrap.js}"></script>
    <script th:src="@{/static/js/vue.min.js}"></script>
    <script th:src="@{/static/plugin/layer/layer.js}"></script>
    <script th:src="@{../static/plugin/pagination/jquery.pagination.js}"></script>
    <script th:src="@{../static/plugin/pagination/bootstrap-paginator.js}"></script>
    <script th:src="@{/static/js/common.js}"></script>
    <script th:src="@{/static/js/common_status_filter.js}"></script>
    <script th:src="@{/static/plugin/jeDate/jeDate.js}"></script>
</head>

<body>
<div id="vueApp" v-cloak>
    <div class="row mx-auto" style="margin-top: 10px;">
        <div class="col-12">
            <table style="width: 100%;">
                <tr>
                    <td>
                        <h3>宣传图片管理</h3>
                    </td>
                    <td style="text-align: right;">
                        <button type="button" class="btn btn-sm btn-warning" @click="doModify(picinfo)">新增</button>
                    </td>
                </tr>
            </table>
        </div>
        <div class="col-12">
            <table class="table table-hover table-bordered table-sm">
                <thead class="thead-default">
                <tr class="text-center">
                    <th style="width: 10%;">序号</th>
                    <th>图片标题</th>
                    <th style="width: 20%;">排序</th>
                    <th style="width: 20%;">操作</th>
                </tr>
                </thead>
                <tbody>
                <tr v-for="(picinfo,index) in list" class="text-center">
                    <td>{{ index+1 }}</td>
                    <td>{{ picinfo.title }}</td>
                    <td class="inline">
                        <button type="button" class="btn btn-sm btn-warning" @click="doModify(picinfo)" v-if="index!=0">上移</button>
                        <button type="button" class="btn btn-sm btn-warning" @click="doDelete(picinfo)" v-if="index!=(list.length-1)">下移</button>&nbsp;&nbsp;&nbsp;&nbsp;
                    </td>
                    <td class="inline">
                        <button type="button" class="btn btn-sm btn-info" @click="doModify(picinfo)">预览</button>
                        <button type="button" class="btn btn-sm btn-warning" @click="doModify(picinfo)">修改</button>
                        <button type="button" class="btn btn-sm btn-warning" @click="doDelete(picinfo)">删除</button>
                    </td>
                </tr>
                </tbody>
            </table>
        </div>
    </div>
    <div class="row" style="width: 95%;">
        <div class="col-12 text-center">
            <ul id='pagination'></ul>
        </div>
    </div>
</div>
</body>
<script>
    var picType = [[${picType}]];

    var vm = new Vue({
        el: "#vueApp",
        data: {
            list: [],
        },
        mounted : function() {
            this.flushData();
        },
        methods:{
            flushData: function(){
                let _this = this;
                $.post("/picInfo/picList", {picType:picType} , function (resp) {
                    _this.list = resp.data;
                })
            }
        }
    })
</script>
</html>