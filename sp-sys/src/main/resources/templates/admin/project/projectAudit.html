<!doctype html>
<html xmlns:th="http://www.w3.org/1999/xhtml">

<head th:include="common :: header">
    <title id="pageTitle">交易信息详情—铁西区农村经济总站土地流转交易监管平台</title>
</head>
<body>
<!-- v-cloak -->
<div id="app">
    <div th:replace="html/project_detail :: project_detail">

    </div>
</div>
<div th:replace="common :: js"></div>
<script type="text/javascript">
    var projectId = [[${projectId}]];

    var vm = new Vue({
        el : '#app',
        data : {
            projectData: {
                projectId: projectId,
            },
        },
        mounted : function() {
            let _this = this;
            $.post("/project/queryDetail", this.projectData, function (result) {
                if (result.code == 0) {
                    _this.projectData = result.projectData;
                } else {
                    layer.msg(result.msg);
                }
            });
        },
        methods : {
            audit: function (type) {
                var tProject = new Object();
                tProject.pkid = projectId;
                tProject.projectStatus = type;

                $.post("/project/projectAudit", tProject, function (result) {
                    if (result.code == 0) {
                        layer.msg("保存成功！",{icon:1, time:2000, shade:0.4},function () {
                            var index = parent.layer.getFrameIndex(window.name);
                            parent.layer.close(index);
                        });
                        parent.vm.doQuery();
                    } else {
                        layer.msg(result.msg);
                    }
                });
            },
        },
    });
</script>
</body>
</html>
