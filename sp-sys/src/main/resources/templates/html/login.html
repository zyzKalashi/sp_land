<!doctype html>
<html xmlns:th="http://www.thymeleaf.org">
<head th:include="common :: head">
<title id="pageTitle">登录系统~四平市铁西区农经总站土地流转管理平台</title>
</head>

<body>
	<div id="app">
		<!-- Top begin -->
		<div class="top">
			<div class="top_z">
				<ul class="fl">
					<li>欢迎访问铁西区土地流转管理平台&nbsp;&nbsp;</li>
					<li>请&nbsp;<a href="javascript:void(0);" class="bold">登录</a>&nbsp;|&nbsp;
					</li>
					<li><a href="javascript:void(0);" class="bold">注册</a></li>
				</ul>

				<ul class="fr huiyuan tform">
					<li><a href="javascript:void(0);">会员中心</a></li>
					<li><a href="javascript:void(0);"> 帮助咨询</a></li>
				</ul>
			</div>
		</div>

		<!-- top end -->

		<!-- header start -->
		<div class="header">
			<div class="header_z">
				<div class="logo">
					<a href="/" title="四平市铁西区农经总站土地流转信息管理平台"> <img width="100%"
						height="auto" alt="logo image" src="../static/images/logo1.png">
					</a>
				</div>
				<div class="search-main tform">
					<form action="" name="">
						<input type="text" name="" class="text" /> <input type="submit"
							name="" class="submit" value="搜索" /> <select name="sel1"
							class="sel1">
							<option value="全部">全部</option>
							<option value="土地流转">土地流转</option>
							<option value="林权转让">林权转让</option>
							<option value="四荒使用">四荒使用</option>
							<option value="养殖水面">养殖水面</option>
						</select>
					</form>
				</div>
				<div class="fabu tform">
					<form action="" name="">
						<select name="sel2" class="sel2">
							<option value="全部">全部</option>
							<option value="土地流转">土地流转</option>
							<option value="林权转让">林权转让</option>
							<option value="四荒使用">四荒使用</option>
							<option value="养殖水面">养殖水面</option>
						</select> <input type="submit" name="" class="fabuxinx" value="发布信息">
					</form>
				</div>
				<ul class="remen clear tform">
					<li>近期热门搜索：</li>
					<li><a href="">土地转让</a></li>
					<li><a href="">林权转让</a></li>
					<li><a href="">养殖水面</a></li>
					<li><a href="">四荒租赁</a></li>
				</ul>
			</div>
		</div>
		<!--<div class="clear1"></div>-->
		<!-- nav bar begin.this can fit anyscreen size -->
		<div class="nav clear1 mb20">
			<div class="nav-z clear1">
				<ul class="clear1 tform">
					<li><a href="/">首页</a></li>
					<li><a href="/">发布信息</a></li>
					<li><a href="/">查看信息</a></li>
					<li><a href="/">政策法规</a></li>
					<li><a href="/">资料下载</a></li>
					<li><a href="/">成交报表</a></li>
					<li><a href="/">咨询我们</a></li>
				</ul>
			</div>
		</div>
		<!-- nav end-->
		<!-- Content Begin -->
		<div class="fabu2 public2">
			<div class="fl">
				<img src="../static/images/main/denglu.png" class="pt10" width="600" height="360">
			</div>
			<div class="fr public2 mr30 mt30">
				<div class="Column_content">
					<table border=0 cellspacing=5 align=center
						style='text-align: left;'>
						<tr>
							<td nowrap>用户：</td>
							<td>
								<input type=text name=U_UserCode value="" style="width: 200px;" v-model="user.userName">
							</td>
						</tr>
						<tr>
							<td>密码：</td>
							<td>
								<input type=password name=U_PassWord style="width: 200px;" v-model="user.password" @keyup.13="login($event)">
							</td>
						</tr>
						<tr>
							<td>验证：</td>
							<td align=left></td>
						</tr>
						<tr>
							<td></td>
							<td><input type=checkbox name=U_AutoLogin value=1>自动登录</td>
						</tr>
					</table>
					<div class="am-text-center am-padding">
						<button type="button" class="am-btn am-btn-default am-btn-warning" @click="login">登录</button>
					</div>
				</div>
			</div>
		</div>
		<!-- Footer Begin -->
		<div th:include="common :: footer"></div>
		<!-- Footer END -->
	</div>
	<div th:include="common :: js"></div>
	<script type="text/javascript">
		var vm = new Vue({
			el : '#app',
			data : {
				user : {
					userName : '',
					password : '',
				},
			},
			mounted : function() {
			},
			methods : {
				checkNull : function() {
					if (!vm.user.userName) {
						layer.msg("请输入用户名！");
						$("#userName").focus();
						return false;
					}
					if (!vm.user.password) {
						layer.msg("请输入密码！");
						$("#password").focus();
						return false;
					} else {
						this.remeber();
						return true;
					}
				},
				login : function() {
					if (vm.checkNull()) {
						// 记住密码
						vm.user.password = hex_md5(vm.user.password);
						hzToolObj.postRpc("/login", vm.user).done(
								function(result) {
									if (result.code == 0) {
										window.location.href = "/index";
									} else {
										layer.msg(result.msg);
									}
								});
					}
				},
				// 记住密码
				remeber : function() {
					var isChecked = $("input[type='checkbox']").is(':checked');
					if (isChecked) {
						// 用户名为空，undefined、“”、null都可以判断
						if (!vm.user.userName && !vm.user.password) {
							return;
						}
						this.SetCookie(vm.user.userName, vm.user.password);
					}
				},
				SetCookie : function(username, password) {
					var Then = new Date();
					Then.setTime(Then.getTime() + 1866240000000);
					document.cookie = "username=" + username + "%%" + password
							+ ";expires=" + Then.toGMTString();
				},
				GetCookie : function() {
					var nmpsd;
					var nm;
					var psd;
					var cookieString = new String(document.cookie);
					var cookieHeader = "username=";
					var beginPosition = cookieString.indexOf(cookieHeader);
					cookieString = cookieString.substring(beginPosition);
					var ends = cookieString.indexOf(";");
					if (ends != -1) {
						cookieString = cookieString.substring(0, ends);
					}
					if (beginPosition > -1) {
						nmpsd = cookieString.substring(cookieHeader.length);
						if (nmpsd != "") {
							beginPosition = nmpsd.indexOf("%%");
							nm = nmpsd.substring(0, beginPosition);
							psd = nmpsd.substring(beginPosition + 2);
							this.user.userName = nm;
							this.user.password = psd;
							if (nm != "" && psd != "") {
								$("#remember-me").prop("checked", true);
							}
						}
					}
				}

			},
		});
	</script>
</body>
</html>
